{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";AAAA;;GAEG;;;AAEH,2DAAkD;AAQlD,SAAgB,aAAa,CAAoB,MAAyB;IAEzE,IAAI,OAAO,MAAM,KAAK,QAAQ,EAC9B;QACC,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,MAAM,EAAE,CAAC,CAAC;KAClC;IAED,IAAI,OAAO,MAAM,KAAK,UAAU,EAChC;QACC,OAAO,MAAM,CAAA;KACb;SACI,IAAI,MAAM,YAAY,MAAM,EACjC;QACC,kBAAkB;QAElB,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,CAAE,MAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;KACnD;IAED,MAAM,IAAI,SAAS,CAAC,oCAAoC,MAAM,EAAE,CAAC,CAAA;AAClE,CAAC;AAnBD,sCAmBC;AAED,SAAgB,cAAc,CAAoB,MAAyB,EAAE,GAE5E,EAAE,UAEC,EAAE;IAEL,IAAI,EAAE,GAAG,aAAa,CAAI,MAAM,CAAC,CAAC;IAElC,IAAI,MAA2B,CAAC;IAEhC,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,EAC7B;QACC,MAAM,GAAG,aAAa,CAAI,OAAO,CAAC,MAAM,CAAC,CAAC;KAC1C;IAED,OAAO,CAAC,MAAM,CAAC,OAAO,CAAI,GAAU,CAAC,CAAC;SACpC,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,EAAE,EAAE;QAExB,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,EAChC;YACC,OAAO,KAAK,CAAC;SACb;QAED,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IACvB,CAAC,CAAC,CACF;AACF,CAAC;AA1BD,wCA0BC;AAED,SAAgB,wBAAwB,CAAoB,MAAyB,EAAE,GAEtF,EAAE,OAEF;IAEA,OAAO,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,CAAC;SACzC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AACvB,CAAC;AARD,4DAQC;AAED,SAAgB,0BAA0B,CAAoB,MAAyB,EAAE,GAExF,EAAE,OAEF;IAEA,OAAO,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,CAAC;SACzC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AACvB,CAAC;AARD,gEAQC;AAED,SAAgB,UAAU,CAAI,GAAQ;IAErC,OAAO,iCAAY,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;QAEnC,OAAO,CAAC,IAAI,CAAC,IAAI,IAAI;YACpB,aAAa;eACV,CAAC,IAAI,MAAM;YACd,aAAa;eACV,CAAC,IAAI,WAAW,CAAA;IACrB,CAAC,CAAC,CAAC;AACJ,CAAC;AAVD,gCAUC;AAED,SAAgB,eAAe,CAAC,CAAS;IAExC,OAAO,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC;QACrC,KAAK;QACL,SAAS;QACT,WAAW;QACX,MAAM;QACN,EAAE;KACF,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;AACrB,CAAC;AATD,0CASC;AAED,SAAgB,UAAU,CAAa,KAAc,EAAE,MAAgB;IAEtE,IAAI,OAAO,KAAK,IAAI,QAAQ,EAC5B;QACC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;KAChB;IAED,IAAI,MAAM,EACV;QACC,KAAK,GAAG,iCAAY,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;KAClC;IAED,aAAa;IACb,OAAO,KAAK,CAAC;AACd,CAAC;AAdD,gCAcC","sourcesContent":["/**\n * Created by user on 2018/1/28/028.\n */\n\nimport { array_unique } from 'array-hyper-unique';\n\ntype IFilterPatternFn<T extends unknown> = ((key: string, value: T | unknown) => boolean);\n\ntype IFilterPattern<T extends unknown> = IFilterPatternFn<T> | string | RegExp;\n\ntype IEntries<T extends unknown> = [string, T][]\n\nexport function _prefix_to_fn<T extends unknown>(prefix: IFilterPattern<T>): IFilterPatternFn<T>\n{\n\tif (typeof prefix === 'string')\n\t{\n\t\tprefix = new RegExp(`^${prefix}`);\n\t}\n\n\tif (typeof prefix === 'function')\n\t{\n\t\treturn prefix\n\t}\n\telse if (prefix instanceof RegExp)\n\t{\n\t\t//prefix.test('');\n\n\t\treturn (key, value) => (prefix as RegExp).test(key)\n\t}\n\n\tthrow new TypeError(`not a function , string, RegExp: ${prefix}`)\n}\n\nexport function filterByPrefix<T extends unknown>(prefix: IFilterPattern<T>, obj: {\n\t[k: string]: T | unknown\n}, options: {\n\tignore?: IFilterPattern<T>,\n} = {}): IEntries<T>\n{\n\tlet fn = _prefix_to_fn<T>(prefix);\n\n\tlet ignore: IFilterPatternFn<T>;\n\n\tif (options && options.ignore)\n\t{\n\t\tignore = _prefix_to_fn<T>(options.ignore);\n\t}\n\n\treturn (Object.entries<T>(obj as any))\n\t\t.filter(([key, value]) =>\n\t\t{\n\t\t\tif (ignore && ignore(key, value))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn fn(key, value);\n\t\t})\n\t;\n}\n\nexport function filterByPrefixReturnKeys<T extends unknown>(prefix: IFilterPattern<T>, obj: {\n\t[k: string]: T | unknown\n}, options?: {\n\tignore?: IFilterPattern<T>,\n})\n{\n\treturn filterByPrefix(prefix, obj, options)\n\t\t.map(item => item[0])\n}\n\nexport function filterByPrefixReturnValues<T extends unknown>(prefix: IFilterPattern<T>, obj: {\n\t[k: string]: T | unknown\n}, options?: {\n\tignore?: IFilterPattern<T>,\n})\n{\n\treturn filterByPrefix(prefix, obj, options)\n\t\t.map(item => item[1])\n}\n\nexport function arr_filter<T>(arr: T[])\n{\n\treturn array_unique(arr).filter(v =>\n\t{\n\t\treturn v && v != null\n\t\t\t// @ts-ignore\n\t\t\t&& v != 'null'\n\t\t\t// @ts-ignore\n\t\t\t&& v != 'undefined'\n\t});\n}\n\nexport function cb_title_filter(v: string)\n{\n\treturn typeof v === 'string' && v && ![\n\t\t'連載中',\n\t\t'長編 【連載】',\n\t\t'undefined',\n\t\t'null',\n\t\t'',\n\t].includes(v.trim())\n}\n\nexport function anyToArray<T = string>(input: T | T[], unique?: boolean): T[]\n{\n\tif (typeof input != 'object')\n\t{\n\t\tinput = [input];\n\t}\n\n\tif (unique)\n\t{\n\t\tinput = array_unique(input || []);\n\t}\n\n\t// @ts-ignore\n\treturn input;\n}\n"]}