{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["export const REGEXP_TO_STRING_TAG = Object.prototype.toString.call(/a/) as string;\n\nexport function toHex(n: number, toUpperCase?: boolean)\n{\n\tlet s = n.toString(16).padStart(4, '0');\n\treturn toUpperCase ? s.toUpperCase() : s;\n}\n\n/**\n * @code\n * console.log(core.toUnicode('𠮷')); // => \\u{20bb7}\n * console.log(core.toUnicode('𠮷'.codePointAt(0)));\n *\n * console.log(core.toUnicode('𠮷', true)); // => \\ud842\\udfb7\n * console.log(core.toUnicode('𠮷'.codePointAt(0), true));\n *\n * /[𠮷]/u.test('𠮷')\n * /[\\u{20bb7}]/u.test('𠮷')\n * /[\\ud842\\udfb7]/u.test('𠮷')\n */\nexport function toUnicode(charCode: number | string, noMerge?: boolean, wrap?: boolean)\n{\n\tlet s: string;\n\n\tif (typeof charCode == 'string')\n\t{\n\t\ts = charCode;\n\t\tcharCode = s.codePointAt(0);\n\t}\n\n\tif (charCode > 0xffff && noMerge)\n\t{\n\t\tlet p: number[];\n\n\t\tif (typeof s != 'string')\n\t\t{\n\t\t\t//s = String.fromCodePoint(charCode);\n\t\t\tp = surrogatePair(charCode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tp = [s.charCodeAt(0), s.charCodeAt(1)];\n\t\t}\n\n\t\treturn p.map(function (n)\n\t\t{\n\t\t\treturn _toUnicode(n, wrap);\n\t\t}).join('');\n\t}\n\n\treturn _toUnicode(charCode, wrap);\n}\n\nexport function toUnicode2(charCode: number | string, options: {\n\tnoMerge?: boolean,\n\twrap?: boolean\n} = {})\n{\n\treturn toUnicode(charCode, options.noMerge, options.wrap)\n}\n\nexport function _toUnicode(charCode: number, wrap?: boolean)\n{\n\tlet hex = toHex(charCode);\n\treturn (wrap || hex.length > 4) ? `\\\\u{${hex}}` : `\\\\u${hex}`;\n}\n\nexport function isDoubleUnicode(str: string)\n{\n\treturn str.charCodeAt(0) == str.codePointAt(0);\n}\n\nexport function isRegExp<T extends RegExp>(r: T): T & RegExp\nexport function isRegExp(r: RegExp): r is RegExp\nexport function isRegExp(r): RegExp | null\nexport function isRegExp(r)\n{\n\tif ((r instanceof RegExp) || Object.prototype.toString.call(r) === REGEXP_TO_STRING_TAG)\n\t{\n\t\treturn r;\n\t}\n\n\treturn null;\n}\n\n/**\n * @link https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n * @link https://github.com/ikatyang/regexp-util/blob/7810ce61ff8becd728b745eb6d5c1ca76adfebe0/src/charset.ts#L289\n *\n * @code\n * surrogatePair('𠮷'.codePointAt(0)) // => { h: 55362, l: 57271 }\n * console.log('𠮷'.charCodeAt(0), '𠮷'.charCodeAt(1)) // => 55362 57271\n */\nexport function surrogatePair(codepoint: number)\n{\n\tlet h = Math.floor((codepoint - 0x10000) / 0x400) + 0xd800;\n\tlet l = (codepoint - 0x10000) % 0x400 + 0xdc00;\n\n\treturn Object.assign([h, l] as [number, number], {\n\t\th,\n\t\tl,\n\t});\n}\n\n/**\n * https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n *\n * @code\n * unicodeUnEscape('\\\\u{48}\\\\u{65}\\\\u{6c}\\\\u{6c}\\\\u{6f}\\\\u{20}\\\\u{77}\\\\u{6f}\\\\u{72}\\\\u{6c}\\\\u{64}') // => 'Hello world'\n * unicodeUnEscape('\\\\u{20bb7}') // => '𠮷'\n */\nexport function unicodeUnEscape(string: string, noLeadingSolidus?: boolean)\n{\n\t// note: this will match `u{123}` (no leading `\\`) as well\n\tconst r = noLeadingSolidus ? /u\\{([0-9a-fA-F]{1,8})\\}/g : /\\\\u\\{([0-9a-fA-F]{1,8})\\}/g;\n\n\treturn string.replace(r, function ($0, $1)\n\t{\n\t\treturn String.fromCodePoint(parseInt($1, 16));\n\t});\n}\n\nexport function unicodeUnEscape2(string: string, options: {\n\tnoLeadingSolidus?: boolean,\n} = {})\n{\n\treturn unicodeUnEscape(string, options.noLeadingSolidus)\n}\n\n/**\n * @code\n * unicodeEscape('𠮷') // => '\\\\u{20bb7}'\n */\nexport function unicodeEscape(string: string,\n\tnoLeadingSolidus?: boolean,\n\tnoMerge?: boolean,\n\tnoWrap?: boolean,\n\tfilter = /./ug\n)\n{\n\treturn string.replace(filter, function ($0, $1)\n\t{\n\t\tlet s = toUnicode($0, noMerge, !noWrap);\n\n\t\treturn noLeadingSolidus ? s.replace(/\\\\/, '') : s;\n\t});\n}\n\nexport function unicodeEscape2(string: string, options: {\n\tnoLeadingSolidus?: boolean,\n\tnoMerge?: boolean,\n\tnoWrap?: boolean,\n\tfilter?: RegExp\n} = {})\n{\n\treturn unicodeEscape(string, options.noLeadingSolidus, options.noMerge, options.noWrap, options.filter)\n}\n\nexport function escapeRegExp(str: string)\n{\n\treturn str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nexport default exports as Readonly<typeof import('./index')>\n\nObject.freeze(exports);\n"]}