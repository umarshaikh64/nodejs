{"version":3,"file":"html.js","sourceRoot":"","sources":["html.ts"],"names":[],"mappings":";;;AAAA,iDAAuC;AACvC,mDAAsC;AAEtC,SAAgB,OAAO,CAAC,IAAY;IAEnC,IAAI,OAAO,GAAG;QACb,kBAAkB,EAAE,IAAI;QACxB,kBAAkB,EAAE,IAAI;QACxB,oBAAoB,EAAE,IAAI;QAC1B,aAAa,EAAE,IAAI;KACnB,CAAC;IAEF,OAAO,sBAAM,CAAC,sBAAM,CAAC,qBAAI,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC;SACvC,OAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC;SAC5C,OAAO,CAAC,2BAA2B,EAAE,IAAI,CAAC,EACzC,OAAO,CAAC,CAAC;AACb,CAAC;AAbD,0BAaC;AAED,SAAgB,QAAQ,CAAC,IAAY;IAEpC,IACA;QACC,OAAO,OAAO,CAAC,IAAI,CAAC,CAAA;KACpB;IACD,OAAO,CAAC,EACR;QACC,OAAO,CAAC,IAAI,CAAE,CAAW,CAAC,OAAO,CAAC,CAAA;KAClC;IAED,OAAO,IAAI,CAAA;AACZ,CAAC;AAZD,4BAYC;AAED,kBAAe,OAAO,CAAA","sourcesContent":["import { minify } from 'html-minifier';\nimport { crlf } from 'crlf-normalize';\n\nexport function fixHtml(html: string): string\n{\n\tlet options = {\n\t\tcollapseWhitespace: true,\n\t\tpreserveLineBreaks: true,\n\t\tconservativeCollapse: true,\n\t\tcaseSensitive: true,\n\t};\n\n\treturn minify(minify(crlf(html), options)\n\t\t.replace(/(?<=<br\\/?>)(?!\\s*[\\r\\n])/ig, '\\n')\n\t\t.replace(/(?<=<\\/p>)(?!\\s*[\\r\\n])/ig, '\\n')\n\t\t, options);\n}\n\nexport function fixHtml2(html: string)\n{\n\ttry\n\t{\n\t\treturn fixHtml(html)\n\t}\n\tcatch (e)\n\t{\n\t\tconsole.warn((e as Error).message)\n\t}\n\n\treturn html\n}\n\nexport default fixHtml\n"]}