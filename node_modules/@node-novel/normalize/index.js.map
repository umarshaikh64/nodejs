{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by user on 2018/2/14/014.\n */\n\nimport StrUtil from 'str-util';\nimport str2num from 'normalize-num';\n\nimport novelFilename from '@lazy-cjk/novel-filename';\nimport { slugify } from '@lazy-cjk/zh-slugify';\n\nexport interface IOptions\n{\n\tpadNum?: number,\n\tcheckRoman?: boolean,\n}\n\nexport function normalize_strip(str: string, isDir?: boolean)\n{\n\tif (isDir)\n\t{\n\t\tif (/^p?\\d{4,}[\\s_](.+)(_\\(\\d+\\))$/.exec(str))\n\t\t{\n\t\t\tstr = RegExp.$1;\n\t\t}\n\t\telse if (/^p?\\d{4,}[\\s_](.+)(_\\(\\d+\\))?$/.exec(str))\n\t\t{\n\t\t\tstr = RegExp.$1;\n\t\t}\n\t}\n\telse\n\t{\n\t\tif (/^\\d+_(.+)\\.\\d+$/.exec(str))\n\t\t{\n\t\t\tstr = RegExp.$1;\n\t\t}\n\t\telse if (/^c?\\d{4,}_(.+)$/.exec(str))\n\t\t{\n\t\t\tstr = RegExp.$1;\n\t\t}\n\t}\n\n\tstr = StrUtil.trim(str, '　');\n\n\treturn str;\n}\n\nexport function normalize_val(str: string, padNum: number = 5, options: IOptions = {}): string\n{\n\tpadNum = padNum || options.padNum;\n\n\t//console.log(111, str);\n\n\tstr = novelFilename.filename(str);\n\n\tif (/^(?:序|プロローグ|Prologue)/i.test(str))\n\t{\n\t\tstr = '0_' + str;\n\t}\n\n\tstr = str.replace(/^(web)版(\\d+)/i, '$1$2');\n\n\t//str = str.replace(/^[cp](\\d{4,}_)/, '$1');\n\n\tstr = StrUtil.toHalfWidth(str)\n\t\t.toLowerCase()\n\t;\n\tstr = StrUtil.trim(str, '　');\n\n\tstr = StrUtil.zh2num(str).toString();\n\n\tstr = StrUtil.zh2num(str, {\n\t\ttruncateOne: 2,\n\t\tflags: 'ug',\n\t}).toString();\n\n\t//console.log(str);\n\n\tstr = str2num(str, {\n\t\tall: true,\n\t\troman: options.checkRoman,\n\t});\n\n\t/*\n\tif (options.checkRoman)\n\t{\n\t\tlet m = isRoman(str);\n\n\t\tif (m)\n\t\t{\n\t\t\tlet n = deromanize(normalizeRoman(m[1]));\n\t\t\tstr = n.toString() + str.slice(m[1].length);\n\t\t\t//console.log(m[1], n, str);\n\t\t}\n\t}\n\n\tstr = circle2num(str);\n\t*/\n\n\tstr = str.replace(/\\d+/g, function ($0)\n\t{\n\t\treturn $0.padStart(padNum, '0');\n\t});\n\n\tstr = str\n\t\t.replace(/^第+/, '')\n\t\t//.replace(/(\\d)[章話]/g, '$1_')\n\t\t//.replace(/第(\\d)/g, '_$1')\n\t\t//.replace(/\\./g, '_')\n\t\t.replace(/[―—－──\\-―—─＝=―——─ー─]/g, '_')\n\t\t.replace(/[\\s　]/g, '_')\n\t\t.replace(/[\\(\\)〔［【《（「『』」》）】〕］〔［〕］]/g, '_')\n\t\t.replace(/[·‧・···•・·᛫•․‧∙⋅⸱⸳・ꞏ·‧・···•˙●‧﹒]/g, '_')\n\t\t.replace(/[：：︰﹕：︓∶:]/ug, '_')\n\t\t.replace(/[・:,]/g, '_')\n\t\t.replace(/_+$/g, '')\n\t\t.replace(/_+/g, '_')\n\n\t;\n\n\t/*\n\tstr = zh2jp(cn2tw(str) as string, {\n\t\tsafe: false,\n\t});\n\t*/\n\n\t/*\n\tstr = zhTable.auto(cn2tw(str, {\n\t\tsafe: false,\n\t\t// @ts-ignore\n\t\tgreedyTable: true,\n\t}), {\n\t\tsafe: false,\n\t\t// @ts-ignore\n\t\tgreedyTable: true,\n\t})[0];\n\t*/\n\n\tstr = slugify(str, true);\n\n\treturn str;\n}\n\nexport default exports as typeof import('./index');\n"]}