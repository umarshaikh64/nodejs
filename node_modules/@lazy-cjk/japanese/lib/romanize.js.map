{"version":3,"file":"romanize.js","sourceRoot":"","sources":["romanize.ts"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nimport { hiraganize } from './kana';\nimport extend from 'lodash/extend';\nimport {\n\tromanizationConfigs,\n\tdefaultRomanizationConfig,\n\tromanizePuncutuationTable,\n\tromanizationTable,\n} from './data/romanize';\nimport { IOptionsRomanize, IRomanizationConfigsKeys } from './types';\n\nexport * from './data/romanize';\n\n/**\n * Convert input text into romaji.\n *\n * important: Most definitions of Japanese text romanizations require total recognition of Japanese text, but robots cannot actually think or understand! Some conversions are hopelessly poor. For example, ISO 3602 defines that \"こうし\" which means \"講師\" must be romanized as \"kôsi\", while \"こうし\" which means \"子牛\" must be romanized as \"kousi\" (because 子牛 is mixed word of 子 and 牛), though these are apparently the same in Kana-form. While japanese.js is very... very very thoroughly tested, this module (and any other romanization machines) cannot distinguish between these semantics. So unfortunately, you cannot use this function for official writing or something. Ugh.\n */\nexport function romanize(string: string, config?: IRomanizationConfigsKeys | IOptionsRomanize)\n{\n\tif (typeof config === 'undefined')\n\t{\n\t\tconfig = 'wikipedia';\n\t}\n\n\tif (typeof config === 'string')\n\t{\n\t\tconfig = romanizationConfigs[config];\n\n\t\tif (typeof config === 'undefined')\n\t\t{\n\t\t\tthrow new ReferenceError('Romanization method \"' + config + '\" is undefined');\n\t\t}\n\t}\n\n\tif (typeof config === 'object')\n\t{\n\t\tconfig = extend({}, defaultRomanizationConfig, config);\n\t}\n\telse\n\t{\n\t\tthrow new Error('You specified unknown config to japanese.romanize');\n\t}\n\n\tconst table = extend({}, romanizationTable);\n\n\tif (config['し'] === 'shi')\n\t{\n\t\textend(table, {\n\t\t\t'し': 'shi',\n\t\t\t'しゃ': 'sha',\n\t\t\t'しゅ': 'shu',\n\t\t\t'しぇ': 'she',\n\t\t\t'しょ': 'sho',\n\t\t});\n\t}\n\n\tif (config['ち'] === 'chi')\n\t{\n\t\textend(table, {\n\t\t\t'ち': 'chi',\n\t\t\t'ちゃ': 'cha',\n\t\t\t'ちゅ': 'chu',\n\t\t\t'ちぇ': 'che',\n\t\t\t'ちょ': 'cho',\n\t\t\t'てぃ': 'ti',\n\t\t\t'てゅ': 'tyu',\n\t\t});\n\t}\n\n\tif (config['つ'] === 'tsu')\n\t{\n\t\textend(table, {\n\t\t\t'つ': 'tsu',\n\t\t\t'つぁ': 'tsa',\n\t\t\t'つぃ': 'tsi',\n\t\t\t'つぇ': 'tse',\n\t\t\t'つぉ': 'tso',\n\t\t\t'つゅ': 'tsyu',\n\t\t\t'とぅ': 'tu',\n\t\t});\n\t}\n\n\tif (config['ふ'] === 'fu')\n\t{\n\t\textend(table, {\n\t\t\t'ふ': 'fu',\n\t\t\t'ふぁ': 'fa',\n\t\t\t'ふぃ': 'fi',\n\t\t\t'ふぇ': 'fe',\n\t\t\t'ふぉ': 'fo',\n\t\t\t'ふゃ': 'fya',\n\t\t\t'ふゅ': 'fyu',\n\t\t\t'ふょ': 'fyo',\n\t\t});\n\t}\n\n\tif (config['じ'] === 'ji')\n\t{\n\t\textend(table, {\n\t\t\t'じ': 'ji',\n\t\t\t'じゃ': 'ja',\n\t\t\t'じゅ': 'ju',\n\t\t\t'じぇ': 'je',\n\t\t\t'じょ': 'jo',\n\t\t});\n\t}\n\n\tif (config['ぢ'] === 'ji')\n\t{\n\t\textend(table, {\n\t\t\t'ぢ': 'ji',\n\t\t\t'ぢゃ': 'ja',\n\t\t\t'ぢゅ': 'ju',\n\t\t\t'ぢぇ': 'je',\n\t\t\t'ぢょ': 'jo',\n\t\t\t'でぃ': 'di',\n\t\t\t'でゅ': 'dyu',\n\t\t});\n\t}\n\n\tif (config['ぢ'] === 'zi')\n\t{\n\t\textend(table, {\n\t\t\t'ぢ': 'zi',\n\t\t\t'ぢゃ': 'zya',\n\t\t\t'ぢゅ': 'zyu',\n\t\t\t'ぢぇ': 'zye',\n\t\t\t'ぢょ': 'zyo',\n\t\t\t'でぃ': 'di',\n\t\t\t'でゅ': 'dyu',\n\t\t});\n\t}\n\n\tif (config['ぢ'] === 'dji')\n\t{\n\t\textend(table, {\n\t\t\t'ぢ': 'dji',\n\t\t\t'ぢゃ': 'dja',\n\t\t\t'ぢゅ': 'dju',\n\t\t\t'ぢぇ': 'dje',\n\t\t\t'ぢょ': 'djo',\n\t\t\t'でぃ': 'di',\n\t\t\t'でゅ': 'dyu',\n\t\t});\n\t}\n\n\tif (config['ぢ'] === 'dzi')\n\t{\n\t\textend(table, {\n\t\t\t'ぢ': 'dzi',\n\t\t\t'ぢゃ': 'dzya',\n\t\t\t'ぢゅ': 'dzyu',\n\t\t\t'ぢぇ': 'dzye',\n\t\t\t'ぢょ': 'dzyo',\n\t\t\t'でぃ': 'di',\n\t\t\t'でゅ': 'dyu',\n\t\t});\n\t}\n\n\tif (config['づ'] === 'zu')\n\t{\n\t\textend(table, {\n\t\t\t'づ': 'zu',\n\t\t\t'づぁ': 'zua',\n\t\t\t'づぃ': 'zui',\n\t\t\t'づぇ': 'zue',\n\t\t\t'づぉ': 'zuo',\n\t\t\t'どぅ': 'du',\n\t\t});\n\t}\n\n\tif (config['づ'] === 'dsu')\n\t{\n\t\textend(table, {\n\t\t\t'づ': 'dsu',\n\t\t\t'づぁ': 'dsua',\n\t\t\t'づぃ': 'dsui',\n\t\t\t'づぇ': 'dsue',\n\t\t\t'づぉ': 'dsuo',\n\t\t\t'どぅ': 'du',\n\t\t});\n\t}\n\n\tif (config['づ'] === 'dzu')\n\t{\n\t\textend(table, {\n\t\t\t'づ': 'dzu',\n\t\t\t'づぁ': 'dzua',\n\t\t\t'づぃ': 'dzui',\n\t\t\t'づぇ': 'dzue',\n\t\t\t'づぉ': 'dzuo',\n\t\t\t'どぅ': 'du',\n\t\t});\n\t}\n\n\tif (config['ゐ'] === 'i')\n\t{\n\t\textend(table, {\n\t\t\t'ゐ': 'i',\n\t\t\t'ゑ': 'e',\n\t\t});\n\t}\n\n\tif (config['を'] === 'o')\n\t{\n\t\textend(table, {\n\t\t\t'を': 'o',\n\t\t});\n\t}\n\n\tstring = hiraganize(string);\n\n\tlet dest = '';\n\tlet previousToken = '';\n\n\twhile (string.length > 0)\n\t{\n\t\tlet token = '';\n\n\t\t// assuming we have only one or two letter token in table\n\t\tif (table[string.slice(0, 2)])\n\t\t{\n\t\t\ttoken = string.slice(0, 2);\n\t\t\tstring = string.slice(2);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttoken = string[0];\n\t\t\tstring = string.slice(1);\n\t\t}\n\n\t\t// handle small tsu\n\t\tif (token === 'っ')\n\t\t{\n\t\t\tpreviousToken = token;\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet tokenDest = table[token] || '';\n\n\t\t// small tsu\n\t\tif (previousToken === 'っ')\n\t\t{\n\t\t\tif (tokenDest.match(/^[^aiueo]/))\n\t\t\t{\n\t\t\t\tif (token[0] === 'ち')\n\t\t\t\t{\n\t\t\t\t\tif (config['っち'] === 'tchi')\n\t\t\t\t\t{\n\t\t\t\t\t\ttokenDest = {\n\t\t\t\t\t\t\t'ち': 'tchi',\n\t\t\t\t\t\t\t'ちゃ': 'tcha',\n\t\t\t\t\t\t\t'ちゅ': 'tchu',\n\t\t\t\t\t\t\t'ちぇ': 'tche',\n\t\t\t\t\t\t\t'ちょ': 'tcho',\n\t\t\t\t\t\t}[token];\n\t\t\t\t\t}\n\t\t\t\t\telse if (config['っち'] === 'cchi')\n\t\t\t\t\t{\n\t\t\t\t\t\ttokenDest = {\n\t\t\t\t\t\t\t'ち': 'cchi',\n\t\t\t\t\t\t\t'ちゃ': 'ccha',\n\t\t\t\t\t\t\t'ちゅ': 'cchu',\n\t\t\t\t\t\t\t'ちぇ': 'cche',\n\t\t\t\t\t\t\t'ちょ': 'ccho',\n\t\t\t\t\t\t}[token];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{ // normally 'tti'\n\t\t\t\t\t\ttokenDest = {\n\t\t\t\t\t\t\t'ち': 'tti',\n\t\t\t\t\t\t\t'ちゃ': 'ttya',\n\t\t\t\t\t\t\t'ちゅ': 'ttyu',\n\t\t\t\t\t\t\t'ちぇ': 'ttye',\n\t\t\t\t\t\t\t'ちょ': 'ttyo',\n\t\t\t\t\t\t}[token];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttokenDest = tokenDest[0] + tokenDest;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/*\n\t\t\t\t * Some article claims that \"ローマ字教育の指針(文部科学省)\" defines that\n\t\t\t\t * strings ending with \"っ\" must be represented with trailing apostrophe\n\t\t\t\t * though I couldn't confirm.\n\t\t\t\t */\n\t\t\t\tdest += '\\'';\n\t\t\t}\n\t\t}\n\n\t\t// long vowel\n\t\tif (token === 'ー')\n\t\t{\n\t\t\tif (dest.match(/[aiueo]$/))\n\t\t\t{\n\t\t\t\tif (config['あー'] === 'a')\n\t\t\t\t{\n\t\t\t\t\t// nope\n\t\t\t\t}\n\t\t\t\telse if (config['あー'] === 'ah')\n\t\t\t\t{\n\t\t\t\t\tdest += 'h';\n\t\t\t\t}\n\t\t\t\telse if (config['あー'] === 'a-')\n\t\t\t\t{\n\t\t\t\t\tdest += '-';\n\t\t\t\t}\n\t\t\t\telse if (config['あー'] === 'aa')\n\t\t\t\t{\n\t\t\t\t\tdest = dest.slice(0, -1) + {\n\t\t\t\t\t\t'a': 'aa',\n\t\t\t\t\t\t'i': 'ii',\n\t\t\t\t\t\t'u': 'uu',\n\t\t\t\t\t\t'e': 'ee',\n\t\t\t\t\t\t'o': 'oo',\n\t\t\t\t\t}[dest.slice(-1)];\n\t\t\t\t}\n\t\t\t\telse if (config['あー'] === 'â')\n\t\t\t\t{\n\t\t\t\t\tdest = dest.slice(0, -1) + {\n\t\t\t\t\t\t'a': 'â',\n\t\t\t\t\t\t'i': 'î',\n\t\t\t\t\t\t'u': 'û',\n\t\t\t\t\t\t'e': 'ê',\n\t\t\t\t\t\t'o': 'ô',\n\t\t\t\t\t}[dest.slice(-1)];\n\t\t\t\t}\n\t\t\t\telse if (config['あー'] === 'ā')\n\t\t\t\t{\n\t\t\t\t\tdest = dest.slice(0, -1) + {\n\t\t\t\t\t\t'a': 'ā',\n\t\t\t\t\t\t'i': 'ī',\n\t\t\t\t\t\t'u': 'ū',\n\t\t\t\t\t\t'e': 'ē',\n\t\t\t\t\t\t'o': 'ō',\n\t\t\t\t\t}[dest.slice(-1)];\n\t\t\t\t}\n\n\t\t\t\ttokenDest = '';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttokenDest = '-';\n\t\t\t}\n\t\t}\n\t\telse if (dest.slice(-1) === 'e' && tokenDest[0] === 'i')\n\t\t{\n\t\t\ttokenDest = tokenDest.slice(1);\n\n\t\t\tif (config['えい'] === 'ei')\n\t\t\t{\n\t\t\t\tdest += 'i';\n\t\t\t}\n\t\t\telse if (config['えい'] === 'ee')\n\t\t\t{\n\t\t\t\tdest += 'e';\n\t\t\t}\n\t\t\telse if (config['えい'] === 'eh')\n\t\t\t{\n\t\t\t\tdest += 'h';\n\t\t\t}\n\t\t\telse if (config['えい'] === 'ê')\n\t\t\t{\n\t\t\t\tdest = dest.slice(0, -1) + 'ê';\n\t\t\t}\n\t\t\telse if (config['えい'] === 'ē')\n\t\t\t{\n\t\t\t\tdest = dest.slice(0, -1) + 'ē';\n\t\t\t}\n\t\t\telse if (config['えい'] === 'e')\n\t\t\t{\n\t\t\t\t// nope\n\t\t\t}\n\t\t}\n\t\telse if (dest.slice(-1) === 'o' && tokenDest[0] === 'u')\n\t\t{\n\t\t\ttokenDest = tokenDest.slice(1);\n\n\t\t\tif (config['おう'] === 'ou')\n\t\t\t{\n\t\t\t\tdest += 'u';\n\t\t\t}\n\t\t\telse if (config['おう'] === 'oo')\n\t\t\t{\n\t\t\t\tdest += 'o';\n\t\t\t}\n\t\t\telse if (config['おう'] === 'oh')\n\t\t\t{\n\t\t\t\tdest += 'h';\n\t\t\t}\n\t\t\telse if (config['おう'] === 'ô')\n\t\t\t{\n\t\t\t\tdest = dest.slice(0, -1) + 'ô';\n\t\t\t}\n\t\t\telse if (config['おう'] === 'ō')\n\t\t\t{\n\t\t\t\tdest = dest.slice(0, -1) + 'ō';\n\t\t\t}\n\t\t\telse if (config['おう'] === 'o')\n\t\t\t{\n\t\t\t\t// nope\n\t\t\t}\n\t\t}\n\t\telse if (dest.match(/[aiueo]$/) && dest.slice(-1) === tokenDest[0] && token !== 'を')\n\t\t{\n\t\t\ttokenDest = tokenDest.slice(1);\n\n\t\t\tdest = dest.slice(0, -1) + config[{\n\t\t\t\t'a': 'ああ',\n\t\t\t\t'i': 'いい',\n\t\t\t\t'u': 'うう',\n\t\t\t\t'e': 'ええ',\n\t\t\t\t'o': 'おお',\n\t\t\t}[dest.slice(-1)]];\n\t\t}\n\n\t\t// んば\n\t\tif (tokenDest.match(/^[bpm]/) && previousToken === 'ん')\n\t\t{\n\t\t\tif (config['んば'] === 'nba')\n\t\t\t{\n\t\t\t\t// nope\n\t\t\t}\n\t\t\telse if (config['んば'] === 'mba')\n\t\t\t{\n\t\t\t\tdest = dest.slice(0, -1) + 'm';\n\t\t\t}\n\t\t}\n\n\t\t// んあ\n\t\tif (tokenDest.match(/^[aiueoy]/) && previousToken === 'ん')\n\t\t{\n\t\t\tif (config['んあ'] === 'na')\n\t\t\t{\n\t\t\t\t// nope\n\t\t\t}\n\t\t\telse if (config['んあ'] === 'n\\'a')\n\t\t\t{\n\t\t\t\ttokenDest = '\\'' + tokenDest;\n\t\t\t}\n\t\t\telse if (config['んあ'] === 'n-a')\n\t\t\t{\n\t\t\t\ttokenDest = '-' + tokenDest;\n\t\t\t}\n\t\t}\n\n\t\tif (config.punctuation && romanizePuncutuationTable[token])\n\t\t{\n\t\t\ttokenDest = romanizePuncutuationTable[token];\n\t\t}\n\n\t\tdest += tokenDest;\n\n\t\tpreviousToken = token;\n\t}\n\n\tif (previousToken === 'っ')\n\t{\n\t\tdest += '\\'';\n\t}\n\n\treturn dest;\n}\n\nexport default romanize\n"]}