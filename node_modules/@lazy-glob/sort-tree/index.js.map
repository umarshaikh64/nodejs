{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";AAAA;;GAEG;;;AAEH,2CAAuD;AACvD,8CAA6D;AAC7D,0DAA+C;AAC/C,qDAAsD;AAGtD,SAAgB,QAAQ,CAAC,EAAY,EAAE,MAAM,GAAG,0BAAmB,EAAE,UAAoB,EAAE;IAE1F,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC;IAEjC,IAAI,MAAM,IAAI,IAAI,EAClB;QACC,MAAM,GAAG,0BAAmB,CAAC;KAC7B;IAED,IAAI,CAAC,GAAG,iBAAU,CAAC,EAAE,CAAC,CAAC;IAEvB,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,EAAE,GAAG,mBAAI,CAAC,CAAC,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE,KAAK;QAErC,OAAO,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,SAAS,EAAE,CAAC,CAAS,EAAE,KAAK;QAE3B,KAAK,GAAG,MAAM,CAAC;QAEf,IAAI,CAAC,IAAI,KAAK,EACd;YACC,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;SAChB;QAED,KAAK,CAAC,CAAC,CAAC,GAAG,yBAAa,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;QAE7C,MAAM,GAAG,KAAK,CAAC;QAEf,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC;IAED,OAAO,iBAAU,CAAC,EAAE,CAAC,CAAC;AACvB,CAAC;AAlCD,4BAkCC;AAED,kBAAe,QAAQ,CAAC","sourcesContent":["/**\n * Created by user on 2020/6/9.\n */\n\nimport { defaultSortCallback } from '@node-novel/sort';\nimport { globToTree, treeToGlob } from 'glob-tree-list/core';\nimport { sort } from '@lazy-glob/sort-entries';\nimport { normalize_val } from '@node-novel/normalize';\nimport { IOptions } from '@lazy-glob/util/lib/types/glob';\n\nexport function sortTree(ls: string[], sortFn = defaultSortCallback, options: IOptions = {}): string[]\n{\n\tlet padNum = options.padNum || 5;\n\n\tif (sortFn == null)\n\t{\n\t\tsortFn = defaultSortCallback;\n\t}\n\n\tlet t = globToTree(ls);\n\n\tlet _cache = {};\n\tlet t2 = sort(t, function (a, b, cache)\n\t{\n\t\treturn sortFn(_c(a, cache), _c(b, cache));\n\t});\n\n\tfunction _c(k: string, cache): string\n\t{\n\t\tcache = _cache;\n\n\t\tif (k in cache)\n\t\t{\n\t\t\treturn cache[k];\n\t\t}\n\n\t\tcache[k] = normalize_val(k, padNum, options);\n\n\t\t_cache = cache;\n\n\t\treturn cache[k];\n\t}\n\n\treturn treeToGlob(t2);\n}\n\nexport default sortTree;\n"]}