{"version":3,"file":"width.js","sourceRoot":"","sources":["width.ts"],"names":[],"mappings":";AAAA;;GAEG;;;;;;AAEH,4DAAmC;AACnC,iDAAsD;AAEtD,SAAgB,WAAW,CAAC,GAAG;IAE9B,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE;QAChD,OAAO,CAAC,CAAC;KACT;IAED,GAAG,GAAG,oBAAS,CAAC,GAAG,CAAC,CAAC;IAErB,IAAI,KAAK,GAAG,CAAC,CAAC;IAEd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACpC,MAAM,IAAI,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAEhC,4BAA4B;QAC5B,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE;YACnD,SAAS;SACT;QAED,8BAA8B;QAC9B,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;YACnC,SAAS;SACT;QAED,aAAa;QACb,IAAI,IAAI,GAAG,MAAM,EAAE;YAClB,CAAC,EAAE,CAAC;SACJ;QAED,KAAK,IAAI,mCAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KAC5C;IAED,OAAO,KAAK,CAAC;AACd,CAAC;AAhCD,kCAgCC;AAED,kBAAe,OAAmC,CAAC","sourcesContent":["/**\n * Created by user on 2017/12/8/008.\n */\n\nimport stripAnsi from 'strip-ansi';\nimport { isFullwidthCodePoint } from './is-fullwidth';\n\nexport function stringWidth(str): number\n{\n\tif (typeof str !== 'string' || str.length === 0) {\n\t\treturn 0;\n\t}\n\n\tstr = stripAnsi(str);\n\n\tlet width = 0;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\tconst code = str.codePointAt(i);\n\n\t\t// Ignore control characters\n\t\tif (code <= 0x1F || (code >= 0x7F && code <= 0x9F)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Ignore combining characters\n\t\tif (code >= 0x300 && code <= 0x36F) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Surrogates\n\t\tif (code > 0xFFFF) {\n\t\t\ti++;\n\t\t}\n\n\t\twidth += isFullwidthCodePoint(code) ? 2 : 1;\n\t}\n\n\treturn width;\n}\n\nexport default exports as typeof import('./width');\n"]}